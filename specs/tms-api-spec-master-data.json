{
  "components": {
    "schemas": {
      "MasterDataRecord": {
        "allOf": [
          {
            "$ref": "./tms-api-spec-common.json#/components/schemas/BaseEntity"
          },
          {
            "type": "object",
            "required": ["type"],
            "description": "Base structure for master data records",
            "properties": {
              "type": {
                "type": "string",
                "enum": ["EQUIPMENT", "LOCATION", "CARRIER", "SERVICE", "ROUTE", "COMMODITY"],
                "description": "Type of master data"
              },
              "validityPeriod": {
                "$ref": "./tms-api-spec-common.json#/components/schemas/DateRange"
              },
              "metadata": {
                "$ref": "#/components/schemas/RecordMetadata"
              }
            }
          }
        ]
      },
      "RecordMetadata": {
        "type": "object",
        "description": "Metadata for master data record",
        "properties": {
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Record creation timestamp"
          },
          "createdBy": {
            "type": "string",
            "description": "User who created the record"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp"
          },
          "updatedBy": {
            "type": "string",
            "description": "User who last updated the record"
          },
          "version": {
            "type": "integer",
            "minimum": 1,
            "description": "Record version number"
          }
        }
      },
      "LocationMasterData": {
        "allOf": [
          {
            "$ref": "#/components/schemas/MasterDataRecord"
          },
          {
            "properties": {
              "location": {
                "$ref": "./tms-api-spec-common.json#/components/schemas/Location"
              },
              "operatingSchedule": {
                "$ref": "./tms-api-spec-common.json#/components/schemas/OperatingSchedule"
              },
              "facilities": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Facility"
                }
              }
            }
          }
        ]
      },
      "Facility": {
        "type": "object",
        "required": ["type"],
        "description": "Facility information",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["WAREHOUSE", "CONTAINER_YARD", "LOADING_DOCK", "PARKING"],
            "description": "Type of facility"
          },
          "capacity": {
            "type": "object",
            "properties": {
              "unit": {
                "type": "string",
                "description": "Capacity unit"
              },
              "value": {
                "type": "number",
                "minimum": 0,
                "description": "Capacity value"
              }
            }
          },
          "features": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Facility features"
          }
        }
      },
      "ValidationRule": {
        "type": "object",
        "required": ["field", "rule"],
        "description": "Data validation rule",
        "properties": {
          "field": {
            "type": "string",
            "description": "Field to validate"
          },
          "rule": {
            "type": "string",
            "description": "Validation rule expression"
          },
          "errorMessage": {
            "type": "string",
            "description": "Message when validation fails"
          },
          "severity": {
            "type": "string",
            "enum": ["WARNING", "ERROR", "CRITICAL"],
            "description": "Validation severity"
          }
        }
      }
    }
  }
}