{
  "components": {
    "schemas": {
      "BookingRequest": {
        "type": "object",
        "required": ["quoteId", "bookingDetails"],
        "description": "Request to create a booking from a quote",
        "properties": {
          "quoteId": {
            "type": "string",
            "format": "uuid",
            "description": "Reference to the accepted quote"
          },
          "quoteOptionId": {
            "type": "string",
            "description": "Specific quote option being booked"
          },
          "bookingDetails": {
            "$ref": "#/components/schemas/BookingDetails"
          },
          "parties": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/BookingParty"
            }
          },
          "documents": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RequiredDocument"
            }
          }
        }
      },
      "BookingDetails": {
        "type": "object",
        "required": ["bookingType", "cargo"],
        "description": "Core booking information",
        "properties": {
          "bookingType": {
            "type": "string",
            "enum": ["STANDARD", "SPECIAL_HANDLING", "DANGEROUS_GOODS", "PROJECT_CARGO"],
            "description": "Type of booking"
          },
          "cargo": {
            "$ref": "#/components/schemas/CargoDetails"
          },
          "routingPreferences": {
            "$ref": "#/components/schemas/RoutingPreferences"
          },
          "serviceRequirements": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ServiceRequirement"
            }
          },
          "references": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/BookingReference"
            }
          }
        }
      },
      "BookingParty": {
        "type": "object",
        "required": ["role", "partyId"],
        "description": "Party involved in the booking",
        "properties": {
          "role": {
            "type": "string",
            "enum": [
              "SHIPPER",
              "CONSIGNEE",
              "FORWARDER",
              "NOTIFY_PARTY",
              "CUSTOMS_BROKER",
              "TERMINAL_OPERATOR"
            ],
            "description": "Role of the party"
          },
          "partyId": {
            "type": "string",
            "description": "Unique identifier for the party"
          },
          "partyDetails": {
            "$ref": "#/components/schemas/PartyDetails"
          },
          "contactInfo": {
            "$ref": "#/components/schemas/Contact"
          }
        }
      },
      "ServiceRequirement": {
        "type": "object",
        "required": ["type"],
        "description": "Special service requirement for the booking",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "TEMPERATURE_CONTROLLED",
              "HAZARDOUS_CARGO",
              "OVERSIZED",
              "HEAVY_LIFT",
              "SPECIAL_HANDLING"
            ],
            "description": "Type of service requirement"
          },
          "details": {
            "type": "string",
            "description": "Additional details about the requirement"
          },
          "specifications": {
            "type": "object",
            "additionalProperties": true,
            "description": "Requirement-specific specifications"
          }
        }
      },
      "BookingReference": {
        "type": "object",
        "required": ["type", "value"],
        "description": "Reference number for the booking",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "CUSTOMER_REFERENCE",
              "PURCHASE_ORDER",
              "SALES_ORDER",
              "SHIPPING_ORDER"
            ],
            "description": "Type of reference"
          },
          "value": {
            "type": "string",
            "description": "Reference number value"
          },
          "issuer": {
            "type": "string",
            "description": "Entity that issued the reference"
          }
        }
      },
      "RequiredDocument": {
        "type": "object",
        "required": ["documentType", "status"],
        "description": "Document required for the booking",
        "properties": {
          "documentType": {
            "type": "string",
            "enum": [
              "COMMERCIAL_INVOICE",
              "PACKING_LIST",
              "CERTIFICATE_OF_ORIGIN",
              "DANGEROUS_GOODS_DECLARATION"
            ],
            "description": "Type of document"
          },
          "status": {
            "type": "string",
            "enum": ["REQUIRED", "RECEIVED", "PENDING", "VERIFIED"],
            "description": "Current status of the document"
          },
          "deadline": {
            "type": "string",
            "format": "date-time",
            "description": "When the document must be submitted by"
          }
        }
      },
      "CapacityAvailability": {
        "type": "object",
        "required": ["route", "availabilityStatus"],
        "description": "Capacity availability information",
        "properties": {
          "route": {
            "$ref": "#/components/schemas/RouteIdentifier"
          },
          "availabilityStatus": {
            "type": "string",
            "enum": ["AVAILABLE", "LIMITED", "WAITLIST", "FULL"],
            "description": "Current availability status"
          },
          "availableCapacity": {
            "type": "object",
            "properties": {
              "containers": {
                "type": "object",
                "additionalProperties": {
                  "type": "integer"
                },
                "description": "Available containers by type"
              },
              "weight": {
                "$ref": "#/components/schemas/Weight"
              },
              "volume": {
                "$ref": "#/components/schemas/Volume"
              }
            }
          },
          "nextAvailability": {
            "type": "string",
            "format": "date-time",
            "description": "Next date when capacity becomes available"
          },
          "restrictions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CapacityRestriction"
            }
          }
        }
      },
      "CapacityRestriction": {
        "type": "object",
        "required": ["type", "description"],
        "description": "Restriction on capacity",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "WEIGHT_LIMIT",
              "SIZE_LIMIT",
              "EQUIPMENT_SHORTAGE",
              "VESSEL_STABILITY",
              "PORT_RESTRICTION"
            ],
            "description": "Type of restriction"
          },
          "description": {
            "type": "string",
            "description": "Detailed description of the restriction"
          },
          "applicableDates": {
            "$ref": "#/components/schemas/DateRange"
          },
          "affectedEquipment": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Equipment types affected"
          }
        }
      },
      "EquipmentAvailability": {
        "type": "object",
        "required": ["location", "equipmentType"],
        "description": "Equipment availability at a location",
        "properties": {
          "location": {
            "$ref": "#/components/schemas/Location"
          },
          "equipmentType": {
            "type": "string",
            "description": "Type of equipment"
          },
          "availableQuantity": {
            "type": "integer",
            "minimum": 0,
            "description": "Number of units available"
          },
          "availabilityDate": {
            "type": "string",
            "format": "date-time",
            "description": "When equipment becomes available"
          },
          "conditions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/EquipmentCondition"
            }
          }
        }
      },
      "EquipmentCondition": {
        "type": "object",
        "description": "Conditions for equipment usage",
        "properties": {
          "depositRequired": {
            "type": "boolean",
            "description": "Whether a deposit is required"
          },
          "depositAmount": {
            "$ref": "#/components/schemas/MonetaryAmount"
          },
          "freeTime": {
            "$ref": "#/components/schemas/Duration"
          },
          "restrictions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Usage restrictions"
          }
        }
      }
    }
  }
}