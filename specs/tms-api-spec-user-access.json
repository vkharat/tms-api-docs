{
  "components": {
    "schemas": {
      "User": {
        "type": "object",
        "required": ["userId", "status", "userType"],
        "description": "User account information",
        "properties": {
          "userId": {
            "type": "string",
            "description": "Unique identifier for the user"
          },
          "status": {
            "type": "string",
            "enum": ["ACTIVE", "INACTIVE", "SUSPENDED", "PENDING"],
            "description": "Current user status"
          },
          "userType": {
            "type": "string",
            "enum": ["CUSTOMER", "EMPLOYEE", "PARTNER", "ADMIN", "SYSTEM"],
            "description": "Type of user account"
          },
          "profile": {
            "$ref": "#/components/schemas/UserProfile"
          },
          "roles": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserRole"
            }
          },
          "permissions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Permission"
            }
          },
          "preferences": {
            "$ref": "#/components/schemas/UserPreferences"
          },
          "security": {
            "$ref": "#/components/schemas/SecuritySettings"
          }
        }
      },
      "UserProfile": {
        "type": "object",
        "required": ["firstName", "lastName", "email"],
        "description": "User profile information",
        "properties": {
          "firstName": {
            "type": "string",
            "description": "User's first name"
          },
          "lastName": {
            "type": "string",
            "description": "User's last name"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Primary email address"
          },
          "phone": {
            "type": "string",
            "pattern": "^\\+?[1-9]\\d{1,14}$",
            "description": "Contact phone number"
          },
          "organization": {
            "$ref": "#/components/schemas/Organization"
          },
          "department": {
            "type": "string",
            "description": "Department within organization"
          },
          "language": {
            "type": "string",
            "pattern": "^[a-z]{2}-[A-Z]{2}$",
            "description": "Preferred language (e.g., en-US)"
          },
          "timezone": {
            "type": "string",
            "description": "Preferred timezone"
          }
        }
      },
      "UserRole": {
        "type": "object",
        "required": ["roleId", "name"],
        "description": "User role definition",
        "properties": {
          "roleId": {
            "type": "string",
            "description": "Unique role identifier"
          },
          "name": {
            "type": "string",
            "description": "Role name"
          },
          "description": {
            "type": "string",
            "description": "Role description"
          },
          "permissions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Permission"
            }
          },
          "scope": {
            "$ref": "#/components/schemas/AccessScope"
          },
          "hierarchy": {
            "type": "integer",
            "minimum": 0,
            "description": "Role hierarchy level"
          }
        }
      },
      "Permission": {
        "type": "object",
        "required": ["resource", "action"],
        "description": "Permission definition",
        "properties": {
          "resource": {
            "type": "string",
            "description": "Resource being accessed"
          },
          "action": {
            "type": "string",
            "enum": ["READ", "WRITE", "DELETE", "ADMIN"],
            "description": "Allowed action"
          },
          "constraints": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AccessConstraint"
            }
          },
          "delegatable": {
            "type": "boolean",
            "description": "Whether permission can be delegated"
          }
        }
      },
      "SecuritySettings": {
        "type": "object",
        "description": "User security settings",
        "properties": {
          "mfaEnabled": {
            "type": "boolean",
            "description": "Multi-factor authentication status"
          },
          "mfaMethods": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["SMS", "EMAIL", "AUTHENTICATOR", "HARDWARE_TOKEN"]
            }
          },
          "passwordLastChanged": {
            "type": "string",
            "format": "date-time",
            "description": "Last password change timestamp"
          },
          "loginAttempts": {
            "type": "integer",
            "minimum": 0,
            "description": "Failed login attempt count"
          },
          "maxLoginAttempts": {
            "type": "integer",
            "minimum": 1,
            "description": "Maximum failed login attempts"
          }
        }
      },
      "AccessScope": {
        "type": "object",
        "description": "Scope of access control",
        "properties": {
          "organizations": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Accessible organizations"
          },
          "regions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Accessible regions"
          },
          "timeRestrictions": {
            "$ref": "#/components/schemas/TimeRestrictions"
          },
          "ipRestrictions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Allowed IP addresses/ranges"
          }
        }
      }
    }
  }
}