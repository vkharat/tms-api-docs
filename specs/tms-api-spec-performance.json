{
  "components": {
    "schemas": {
      "PerformanceMetrics": {
        "type": "object",
        "required": ["timeframe", "metrics"],
        "description": "Performance measurement and analytics data",
        "properties": {
          "timeframe": {
            "$ref": "#/components/schemas/DateRange"
          },
          "metrics": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MetricData"
            }
          },
          "aggregationLevel": {
            "type": "string",
            "enum": ["HOURLY", "DAILY", "WEEKLY", "MONTHLY", "QUARTERLY", "YEARLY"],
            "description": "Time granularity of the metrics"
          },
          "dimensions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Analysis dimensions (e.g., carrier, route, customer)"
          },
          "filters": {
            "$ref": "#/components/schemas/MetricFilters"
          },
          "comparisons": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MetricComparison"
            }
          }
        }
      },
      "MetricData": {
        "type": "object",
        "required": ["name", "value", "unit"],
        "description": "Individual metric measurement",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the metric"
          },
          "value": {
            "type": "number",
            "description": "Metric value"
          },
          "unit": {
            "type": "string",
            "description": "Unit of measurement"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "When the metric was recorded"
          },
          "confidence": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Confidence level in the metric (0-1)"
          },
          "components": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MetricComponent"
            }
          }
        }
      },
      "MetricFilters": {
        "type": "object",
        "description": "Filtering criteria for metrics",
        "properties": {
          "timeRange": {
            "$ref": "#/components/schemas/DateRange"
          },
          "dimensions": {
            "type": "object",
            "additionalProperties": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "Dimension-based filters"
          },
          "thresholds": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MetricThreshold"
            }
          },
          "exclusions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Metrics to exclude"
          }
        }
      },
      "MetricThreshold": {
        "type": "object",
        "required": ["metric", "operator", "value"],
        "description": "Threshold definition for metric filtering",
        "properties": {
          "metric": {
            "type": "string",
            "description": "Metric name"
          },
          "operator": {
            "type": "string",
            "enum": ["GT", "GTE", "LT", "LTE", "EQ", "NEQ"],
            "description": "Comparison operator"
          },
          "value": {
            "type": "number",
            "description": "Threshold value"
          },
          "severity": {
            "type": "string",
            "enum": ["INFO", "WARNING", "CRITICAL"],
            "description": "Severity when threshold is breached"
          }
        }
      },
      "MetricComparison": {
        "type": "object",
        "required": ["baseMetric", "comparisonMetric", "type"],
        "description": "Comparison between metrics",
        "properties": {
          "baseMetric": {
            "type": "string",
            "description": "Base metric for comparison"
          },
          "comparisonMetric": {
            "type": "string",
            "description": "Metric being compared against"
          },
          "type": {
            "type": "string",
            "enum": ["PERIOD", "TARGET", "BENCHMARK"],
            "description": "Type of comparison"
          },
          "difference": {
            "type": "number",
            "description": "Absolute difference"
          },
          "percentageChange": {
            "type": "number",
            "description": "Percentage change"
          },
          "trend": {
            "type": "string",
            "enum": ["IMPROVING", "STABLE", "DEGRADING"],
            "description": "Trend direction"
          },
          "analysis": {
            "type": "string",
            "description": "Notable observations from comparison"
          }
        }
      },
      "MetricComponent": {
        "type": "object",
        "required": ["name", "value"],
        "description": "Component of a composite metric",
        "properties": {
          "name": {
            "type": "string",
            "description": "Component name"
          },
          "value": {
            "type": "number",
            "description": "Component value"
          },
          "weight": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Relative weight in composite calculation"
          }
        }
      }
    }
  }
}