{
  "components": {
    "schemas": {
      "PerformanceMetrics": {
        "type": "object",
        "required": ["timeframe", "metrics"],
        "description": "Performance measurement and analytics data",
        "properties": {
          "timeframe": {
            "$ref": "./tms-api-spec-common.json#/components/schemas/DateRange"
          },
          "metrics": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Metric"
            }
          },
          "aggregation": {
            "type": "string",
            "enum": ["HOURLY", "DAILY", "WEEKLY", "MONTHLY"],
            "description": "Metric aggregation level"
          },
          "filters": {
            "$ref": "#/components/schemas/MetricFilters"
          }
        }
      },
      "Metric": {
        "type": "object",
        "required": ["name", "value", "unit"],
        "description": "Individual performance metric",
        "properties": {
          "name": {
            "type": "string",
            "enum": [
              "ON_TIME_DELIVERY",
              "TRANSIT_TIME",
              "COST_EFFICIENCY",
              "CAPACITY_UTILIZATION",
              "EXCEPTION_RATE",
              "CUSTOMER_SATISFACTION"
            ],
            "description": "Metric name"
          },
          "value": {
            "type": "number",
            "description": "Metric value"
          },
          "unit": {
            "type": "string",
            "description": "Unit of measurement"
          },
          "trend": {
            "$ref": "#/components/schemas/MetricTrend"
          },
          "threshold": {
            "$ref": "#/components/schemas/MetricThreshold"
          },
          "components": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MetricComponent"
            }
          }
        }
      },
      "MetricTrend": {
        "type": "object",
        "description": "Trend analysis for metric",
        "properties": {
          "direction": {
            "type": "string",
            "enum": ["INCREASING", "DECREASING", "STABLE"],
            "description": "Trend direction"
          },
          "percentage": {
            "type": "number",
            "description": "Percentage change"
          },
          "period": {
            "$ref": "./tms-api-spec-common.json#/components/schemas/Duration"
          }
        }
      },
      "MetricThreshold": {
        "type": "object",
        "description": "Threshold configuration for metric",
        "properties": {
          "warning": {
            "type": "number",
            "description": "Warning threshold value"
          },
          "critical": {
            "type": "number",
            "description": "Critical threshold value"
          },
          "comparison": {
            "type": "string",
            "enum": ["GREATER_THAN", "LESS_THAN", "EQUAL", "BETWEEN"],
            "description": "Comparison operator"
          }
        }
      },
      "MetricFilters": {
        "type": "object",
        "description": "Filters for metric calculation",
        "properties": {
          "routes": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Route identifiers"
          },
          "carriers": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Carrier identifiers"
          },
          "customers": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Customer identifiers"
          },
          "services": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Service types"
          }
        }
      },
      "MetricComponent": {
        "type": "object",
        "required": ["name", "value"],
        "description": "Component of a composite metric",
        "properties": {
          "name": {
            "type": "string",
            "description": "Component name"
          },
          "value": {
            "type": "number",
            "description": "Component value"
          },
          "weight": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Relative weight in composite calculation"
          }
        }
      }
    }
  }
}