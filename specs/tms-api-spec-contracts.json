{
  "components": {
    "schemas": {
      "Contract": {
        "allOf": [
          {
            "$ref": "./tms-api-spec-common.json#/components/schemas/BaseEntity"
          },
          {
            "type": "object",
            "required": ["parties", "validityPeriod"],
            "description": "Transportation service contract",
            "properties": {
              "parties": {
                "type": "array",
                "items": {
                  "$ref": "./tms-api-spec-common.json#/components/schemas/Party"
                }
              },
              "validityPeriod": {
                "$ref": "./tms-api-spec-common.json#/components/schemas/DateRange"
              },
              "terms": {
                "$ref": "#/components/schemas/ContractTerms"
              },
              "rates": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/ContractRate"
                }
              }
            }
          }
        ]
      },
      "ContractTerms": {
        "type": "object",
        "description": "Contract terms and conditions",
        "properties": {
          "paymentTerms": {
            "type": "string",
            "description": "Payment terms description"
          },
          "billingDetails": {
            "$ref": "./tms-api-spec-base.json#/components/schemas/BillingDetails"
          },
          "serviceLevel": {
            "type": "string",
            "description": "Service level agreement"
          },
          "specialConditions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Special conditions or requirements"
          }
        }
      },
      "ContractRate": {
        "type": "object",
        "required": ["rateType", "amount"],
        "description": "Contract rate information",
        "properties": {
          "rateType": {
            "type": "string",
            "enum": ["BASE", "SURCHARGE", "DISCOUNT"],
            "description": "Type of rate"
          },
          "amount": {
            "$ref": "./tms-api-spec-common.json#/components/schemas/MonetaryAmount"
          },
          "conditions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RateCondition"
            }
          }
        }
      },
      "RateCondition": {
        "type": "object",
        "required": ["type", "value"],
        "description": "Condition for rate application",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["WEIGHT", "VOLUME", "DISTANCE", "DURATION"],
            "description": "Type of condition"
          },
          "value": {
            "type": "number",
            "description": "Condition value"
          },
          "unit": {
            "type": "string",
            "description": "Unit of measurement"
          }
        }
      }
    }
  }
}