{
  "components": {
    "schemas": {
      "Contract": {
        "allOf": [
          {
            "$ref": "./tms-api-spec-common.json#/components/schemas/BaseEntity"
          },
          {
            "type": "object",
            "required": ["parties", "validityPeriod"],
            "description": "Transportation service contract",
            "properties": {
              "parties": {
                "type": "array",
                "items": {
                  "$ref": "./tms-api-spec-common.json#/components/schemas/Party"
                }
              },
              "validityPeriod": {
                "$ref": "./tms-api-spec-common.json#/components/schemas/DateRange"
              },
              "terms": {
                "$ref": "#/components/schemas/ContractTerms"
              },
              "rates": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/ContractRate"
                }
              }
            }
          }
        ]
      },
      "ContractTerms": {
        "type": "object",
        "description": "Contract terms and conditions",
        "properties": {
          "paymentTerms": {
            "type": "string",
            "enum": ["PREPAID", "COLLECT", "CREDIT"],
            "description": "Payment terms"
          },
          "creditLimit": {
            "$ref": "./tms-api-spec-common.json#/components/schemas/MonetaryAmount"
          },
          "paymentDuration": {
            "$ref": "./tms-api-spec-common.json#/components/schemas/Duration"
          },
          "serviceLevel": {
            "type": "string",
            "enum": ["STANDARD", "EXPRESS", "PREMIUM"],
            "description": "Service level agreement"
          }
        }
      },
      "ContractRate": {
        "type": "object",
        "required": ["origin", "destination", "rateType", "amount"],
        "description": "Contract rate for a specific route",
        "properties": {
          "origin": {
            "$ref": "./tms-api-spec-common.json#/components/schemas/Location"
          },
          "destination": {
            "$ref": "./tms-api-spec-common.json#/components/schemas/Location"
          },
          "rateType": {
            "type": "string",
            "enum": ["PER_CONTAINER", "PER_KG", "PER_CBM", "FLAT_RATE"],
            "description": "Type of rate"
          },
          "amount": {
            "$ref": "./tms-api-spec-common.json#/components/schemas/MonetaryAmount"
          },
          "conditions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RateCondition"
            }
          }
        }
      },
      "RateCondition": {
        "type": "object",
        "required": ["type", "value"],
        "description": "Condition for rate application",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["MIN_QUANTITY", "MAX_QUANTITY", "EQUIPMENT_TYPE", "COMMODITY_TYPE"],
            "description": "Type of condition"
          },
          "value": {
            "type": "string",
            "description": "Condition value"
          },
          "operator": {
            "type": "string",
            "enum": ["EQUALS", "GREATER_THAN", "LESS_THAN", "BETWEEN"],
            "description": "Comparison operator"
          }
        }
      }
    }
  }
}