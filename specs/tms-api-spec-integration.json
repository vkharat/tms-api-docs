{
  "components": {
    "schemas": {
      "PartnerIntegration": {
        "type": "object",
        "required": ["partnerId", "integrationType", "status"],
        "description": "Configuration for partner system integration",
        "properties": {
          "partnerId": {
            "type": "string",
            "description": "Unique identifier for the partner"
          },
          "integrationType": {
            "type": "string",
            "enum": ["API", "EDI", "SFTP", "WEBHOOK"],
            "description": "Type of integration"
          },
          "status": {
            "type": "string",
            "enum": ["ACTIVE", "INACTIVE", "TESTING", "FAILED"],
            "description": "Current integration status"
          },
          "capabilities": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/IntegrationCapability"
            }
          },
          "endpoints": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/IntegrationEndpoint"
            }
          },
          "authentication": {
            "$ref": "#/components/schemas/AuthenticationConfig"
          },
          "messageFormat": {
            "$ref": "#/components/schemas/MessageFormat"
          },
          "errorHandling": {
            "$ref": "#/components/schemas/ErrorHandlingConfig"
          }
        }
      },
      "IntegrationCapability": {
        "type": "object",
        "required": ["type", "version"],
        "description": "Supported integration capability",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["BOOKING", "TRACKING", "DOCUMENTATION", "RATES"],
            "description": "Type of capability"
          },
          "version": {
            "type": "string",
            "pattern": "^\\d+\\.\\d+(\\.\\d+)?$",
            "description": "Version of the capability"
          },
          "features": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Supported features"
          }
        }
      },
      "IntegrationEndpoint": {
        "type": "object",
        "required": ["name", "url", "method"],
        "description": "Integration endpoint configuration",
        "properties": {
          "name": {
            "type": "string",
            "description": "Endpoint name"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "Endpoint URL"
          },
          "method": {
            "type": "string",
            "enum": ["GET", "POST", "PUT", "DELETE"],
            "description": "HTTP method"
          },
          "headers": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Custom headers"
          }
        }
      },
      "AuthenticationConfig": {
        "type": "object",
        "required": ["type"],
        "description": "Authentication configuration",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["API_KEY", "OAUTH2", "BASIC", "JWT"],
            "description": "Authentication type"
          },
          "credentials": {
            "type": "object",
            "additionalProperties": true,
            "description": "Authentication credentials"
          },
          "tokenEndpoint": {
            "type": "string",
            "format": "uri",
            "description": "Token endpoint for OAuth2"
          }
        }
      },
      "MessageFormat": {
        "type": "object",
        "required": ["type"],
        "description": "Message format configuration",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["JSON", "XML", "EDIFACT", "CSV"],
            "description": "Message format type"
          },
          "version": {
            "type": "string",
            "description": "Format version"
          },
          "encoding": {
            "type": "string",
            "default": "UTF-8",
            "description": "Character encoding"
          },
          "schema": {
            "type": "string",
            "description": "Schema definition or URL"
          }
        }
      },
      "ErrorHandlingConfig": {
        "type": "object",
        "description": "Error handling configuration",
        "properties": {
          "retryAttempts": {
            "type": "integer",
            "minimum": 0,
            "description": "Number of retry attempts"
          },
          "retryInterval": {
            "$ref": "./tms-api-spec-common.json#/components/schemas/Duration"
          },
          "errorCodes": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Error codes that should trigger retry"
          }
        }
      },
      "EDIConfiguration": {
        "type": "object",
        "required": ["documentType", "version"],
        "description": "EDI-specific configuration",
        "properties": {
          "documentType": {
            "type": "string",
            "enum": ["204", "214", "310", "315", "404", "990"],
            "description": "EDI document type"
          },
          "version": {
            "type": "string",
            "description": "EDI version"
          },
          "segmentDelimiter": {
            "type": "string",
            "description": "Segment delimiter character"
          },
          "elementDelimiter": {
            "type": "string",
            "description": "Element delimiter character"
          },
          "requirements": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/EDIRequirement"
            }
          }
        }
      },
      "IntegrationMetrics": {
        "type": "object",
        "description": "Integration performance metrics",
        "properties": {
          "availability": {
            "type": "number",
            "minimum": 0,
            "maximum": 100,
            "description": "Availability percentage"
          },
          "responseTime": {
            "type": "object",
            "properties": {
              "average": {
                "type": "number"
              },
              "p95": {
                "type": "number"
              },
              "p99": {
                "type": "number"
              }
            }
          },
          "errorRate": {
            "type": "number",
            "description": "Error rate percentage"
          },
          "throughput": {
            "type": "object",
            "properties": {
              "requests": {
                "type": "integer"
              },
              "period": {
                "type": "string"
              }
            }
          }
        }
      }
    }
  }
}